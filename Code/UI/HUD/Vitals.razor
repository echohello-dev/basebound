@using Sandbox;
@using Sandbox.UI;
@inherits Panel
@attribute [StyleSheet]
@namespace Basebound.UI

@* Health bar with visual feedback for damage/critical state *@
@if ( !Bridge.IsValid() || !Bridge.HasViewer ) return;

<root class="vitals @(Bridge.IsCriticalHealth ? "critical" : "")">
	<div class="health-container">
		<div class="health-bar">
			<div class="health-fill" style="width: @(Bridge.HealthPercent)%"></div>
		</div>
		<div class="health-text">
			<span class="current">@Bridge.CurrentHealth</span>
			<span class="separator">/</span>
			<span class="max">@Bridge.MaxHealth</span>
		</div>
	</div>
</root>

@code {
	public HudDataBridge Bridge { get; set; }

	protected override int BuildHash()
	{
		if ( !Bridge.IsValid() ) return 0;

		return System.HashCode.Combine(
			Bridge.HasViewer,
			Bridge.CurrentHealth,
			Bridge.MaxHealth,
			Bridge.IsCriticalHealth
		);
	}
}
